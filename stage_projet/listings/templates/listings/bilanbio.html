
{% extends 'listings/template.html' %}

{% block formbilanbio %}
<center>
<form method="post" action=""  class="formcontenutab">
<div>
<nav class="divcontenunav">bilan biologique</nav>
</div>
{% csrf_token %}
  <fieldset>

        {% if success %}
        <p class="p2">bilan biologique enregistré.</p>
        {% endif %}
        {% if error_message %}
                <p class="p1">{{ error_message }}</p>
        {% endif %}
    <table id="yes" class="table1">
        <tr>
            <th>Type d'examen</th>
            <th>Résultat numérique</th>
            <th>Résultat modalité</th>
            <th>unités</th>
            <th>prix</th>
            <th>Résultat</th>
            <th>Date</th>
        </tr>

      <tr> 
          <td>  
            <div >
                <select name="typeexamen" required>
                        <option>choisir</option>
                        <option value="Sérologie rétroviral">Sérologie rétroviral</option>
                        <option value="IgG anti VHE">IgG anti VHE</option>
                        <option value="IgM anti VHE">IgM anti VHE</option>
                        <option value="Ac anti VHD">Ac anti VHD</option>
                        <option value="Ac anti HBe">Ac anti HBe</option>
                        <option value="Ag HBe">Ag HBe</option>
                </select>
              </div>
          </td> 


          <td> 
            <div >
              <input  type="text" name="resultatnumerique">
            </div>
         </td> 

          <td> 
              <div  class="custom-control custom-radio" id="presdiv11">
                  <input type="radio"  name="resultatmodalite"  value="positif"    class="custom-control-input" id="exampleRadios1"/>
                  <label class="custom-control-label" for="exampleRadios1">Positif</label>
              </div>
              <div  class="custom-control custom-radio" id="presdiv10">
                  <input type="radio"  name="resultatmodalite"  value="négatif"    class="custom-control-input" id="exampleRadios2"/>
                  <label class="custom-control-label" for="exampleRadios2">Négatif</label>
              </div>
          </td> 


          <td> 
            <div>
              <select name="unite"  required>
                      <option>choisir</option>
                      <option value="UI/ ml">UI/ ml</option>
                      <option value="mmol/ l">mmol/ l</option>
                      <option value="g/l">g/l</option>
                      <option value="/mm3">/mm3</option>
                      <option value="mmol/l">mmol/l</option>
                      <option value="%">%</option>
              </select>
            </div>
          </td> 

        <td> 
          <div>
            <input  type="text" name="prix">
          </div>
        </td> 

        <td> 
            <div>
              <input  type="text" name="resultatdubilan">
            </div>
        </td> 

        <td> 
            <div>
              <input  type="date" name="datedubilan">
            </div>
        </td> 

      </tr> 
    </table>
    <div style="margin-left:620px">
      <input type="checkbox"   name="ajout"  value="oui1" onclick="ajouter()"/>Ajouter un nouvel examen
    </div>
    <input type="hidden"  name="consultation"  value="{{derniere_consultation_id}}"/>
    </fieldset>
    <input type="submit"  name="validbilanimg"  value="Enregister" class="btn btn-primary"/>
</form>
</center>
<script>
  let radioIndex = 0;
  function ajouter() {
    var affichecheckbox = document.getElementsByName("ajout");
    var inputField1 = document.getElementById("yes");
    

     for (var i = 0; i < affichecheckbox.length; i++) {
        if (affichecheckbox[i].value == "oui1") {
                var initialRowCount = inputField1.rows.length;
                var newRow = inputField1.insertRow(-1);
                var cell1 = newRow.insertCell(0);
                var cell2 = newRow.insertCell(1);
                var cell3 = newRow.insertCell(2);
                var cell4 = newRow.insertCell(3);
                var cell5 = newRow.insertCell(4);
                var cell6 = newRow.insertCell(5);
                var cell7 = newRow.insertCell(6);

                cell1.innerHTML = `<div>
                    <select name="typeexamen" required>
                        <option>choisir</option>
                        <option value="Sérologie rétroviral">Sérologie rétroviral</option>
                        <option value="IgG anti VHE">IgG anti VHE</option>
                        <option value="IgM anti VHE">IgM anti VHE</option>
                        <option value="Ac anti VHD">Ac anti VHD</option>
                        <option value="Ac anti HBe">Ac anti HBe</option>
                        <option value="Ag HBe">Ag HBe</option>
                    </select>
                </div>`;

                cell2.innerHTML = `<div>
                    <input type="text" name="resultatnumerique">
                </div>`;

                cell3.innerHTML = `<div class="custom-control custom-radio" id="presdiv11">
                    <input type="radio" name="resultatmodalite" value="Positif" class="custom-control-input" />
                    <label class="custom-control-label" >Positif</label>
                </div>
                <div class="custom-control custom-radio" id="presdiv10">
                    <input type="radio" name="resultatmodalite" value="Négatif" class="custom-control-input" />
                    <label class="custom-control-label" >Négatif</label>
                </div>`;

                cell4.innerHTML = `<div>
                    <select name="unite" required>
                        <option>choisir</option>
                        <option value="UI/ ml">UI/ ml</option>
                        <option value="mmol/ l">mmol/ l</option>
                        <option value="g/l">g/l</option>
                        <option value="/mm3">/mm3</option>
                        <option value="mmol/l">mmol/l</option>
                        <option value="%">%</option>
                    </select>
                </div>`;

                cell5.innerHTML = `<div>
                    <input type="text" name="prix">
                </div>`;

                cell6.innerHTML = `<div>
              <input  type="text" name="resultatdubilan">
            </div>`;

                cell7.innerHTML = `<div>
              <input  type="date" name="datedubilan">
            </div>`;


            container.innerHTML += cell3;
            radioIndex++;


            var finalRowCount = inputField1.rows.length;
            if (finalRowCount > initialRowCount) {
                affichecheckbox[i].checked = false;
            }
        }
    }
}
</script>
{% endblock %}                                                                           